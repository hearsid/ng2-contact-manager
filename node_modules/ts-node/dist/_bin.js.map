{"version":3,"file":"_bin.js","sourceRoot":"","sources":["../src/_bin.ts"],"names":[],"mappings":"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","sourcesContent":["import { join, resolve, basename } from 'path'\nimport { start, Recoverable } from 'repl'\nimport { inspect } from 'util'\nimport arrify = require('arrify')\nimport Module = require('module')\nimport minimist = require('minimist')\nimport chalk = require('chalk')\nimport { createScript } from 'vm'\nimport { register, VERSION, getFile, fileExists, TSError, parse } from './index'\n\ninterface Argv {\n  eval?: string\n  print?: string\n  fast?: boolean\n  lazy?: boolean\n  cache?: boolean\n  cacheDirectory?: string\n  version?: boolean\n  help?: boolean\n  compiler?: string\n  project?: string\n  require?: string | string[]\n  ignore?: boolean | string | string[]\n  ignoreWarnings?: string | string[]\n  disableWarnings?: boolean\n  compilerOptions?: any\n  _: string[]\n}\n\nconst strings = ['eval', 'print', 'compiler', 'project', 'ignoreWarnings', 'require', 'cacheDirectory', 'ignore']\nconst booleans = ['help', 'fast', 'lazy', 'version', 'disableWarnings', 'cache']\n\nconst aliases: { [key: string]: string[] } = {\n  help: ['h'],\n  fast: ['F'],\n  lazy: ['L'],\n  version: ['v'],\n  eval: ['e'],\n  print: ['p'],\n  project: ['P'],\n  compiler: ['C'],\n  require: ['r'],\n  cacheDirectory: ['cache-directory'],\n  ignoreWarnings: ['I', 'ignore-warnings'],\n  disableWarnings: ['D', 'disable-warnings'],\n  compilerOptions: ['O', 'compiler-options']\n}\n\nlet stop = process.argv.length\n\nfunction isFlagOnly (arg: string) {\n  const name = arg.replace(/^--?/, '')\n\n  // The value is part of this argument.\n  if (/=/.test(name) || /^--no-/.test(arg)) {\n    return true\n  }\n\n  for (const bool of booleans) {\n    if (name === bool) {\n      return true\n    }\n\n    const alias = aliases[bool]\n\n    if (alias) {\n      for (const other of alias) {\n        if (other === name) {\n          return true\n        }\n      }\n    }\n  }\n\n  return false\n}\n\n// Hack around known subarg issue with `stopEarly`.\nfor (let i = 2; i < process.argv.length; i++) {\n  const arg = process.argv[i]\n  const next = process.argv[i + 1]\n\n  if (/^\\[/.test(arg) || /\\]$/.test(arg)) {\n    continue\n  }\n\n  if (/^-/.test(arg)) {\n    // Skip next argument.\n    if (!isFlagOnly(arg) && !/^-/.test(next)) {\n      i++\n    }\n\n    continue\n  }\n\n  stop = i\n  break\n}\n\nconst argv = minimist<Argv>(process.argv.slice(2, stop), {\n  string: strings,\n  boolean: booleans,\n  alias: aliases,\n  default: {\n    cache: true\n  }\n})\n\nif (argv.version) {\n  console.log(`ts-node v${VERSION}`)\n  console.log(`node ${process.version}`)\n  process.exit(0)\n}\n\nif (argv.help) {\n  console.log(`\nUsage: ts-node [options] [ -e script | script.ts ] [arguments]\n\nOptions:\n\n  -e, --eval [code]              Evaluate code\n  -p, --print [code]             Evaluate code and print result\n  -r, --require [path]           Require a node module for execution\n  -C, --compiler [name]          Specify a custom TypeScript compiler\n  -I, --ignoreWarnings [code]    Ignore TypeScript warnings by diagnostic code\n  -D, --disableWarnings          Ignore every TypeScript warning\n  -P, --project [path]           Path to TypeScript project (or \\`false\\`)\n  -O, --compilerOptions [opts]   JSON object to merge with compiler options\n  -L, --lazy                     Lazily load TypeScript compilation on demand\n  -F, --fast                     Run TypeScript compilation in transpile mode\n  --ignore [regexp], --no-ignore Set the ignore check (default: \\`/node_modules/\\`)\n  --no-cache                     Disable the TypeScript cache\n  --cache-directory              Configure the TypeScript cache directory\n`)\n\n  process.exit(0)\n}\n\nconst cwd = process.cwd()\nconst code = argv.eval == null ? argv.print : argv.eval\nconst isEvalScript = typeof argv.eval === 'string' || !!argv.print // Minimist struggles with empty strings.\nconst isEval = isEvalScript || stop === process.argv.length\nconst isPrinted = argv.print != null\nconst supportsScriptOptions = parseFloat(process.version.substr(1)) >= 1\n\n// Register the TypeScript compiler instance.\nconst service = register({\n  fast: argv.fast,\n  lazy: argv.lazy,\n  cache: argv.cache,\n  cacheDirectory: argv.cacheDirectory,\n  compiler: argv.compiler,\n  project: argv.project,\n  ignore: argv.ignore,\n  ignoreWarnings: argv.ignoreWarnings,\n  disableWarnings: argv.disableWarnings,\n  compilerOptions: parse(argv.compilerOptions),\n  getFile: isEval ? getFileEval : getFile,\n  fileExists: isEval ? fileExistsEval : fileExists\n})\n\n// Increment the `eval` id to keep track of execution.\nlet evalId = 0\n\n// Note: TypeScript files must always end with `.ts`.\nconst EVAL_PATHS: { [path: string]: string } = {}\n\n// Require specified modules before start-up.\nfor (const id of arrify(argv.require)) {\n  Module._load(id)\n}\n\n// Execute the main contents (either eval, script or piped).\nif (isEvalScript) {\n  evalAndExit(code as string, isPrinted)\n} else {\n  if (stop < process.argv.length) {\n    const args = process.argv.slice(stop)\n    args[0] = resolve(cwd, args[0])\n    process.argv = ['node'].concat(args)\n    process.execArgv.unshift(__filename)\n    Module.runMain()\n  } else {\n    // Piping of execution _only_ occurs when no other script is specified.\n    if ((process.stdin as any).isTTY) {\n      startRepl()\n    } else {\n      let code = ''\n      process.stdin.on('data', (chunk: Buffer) => code += chunk)\n      process.stdin.on('end', () => evalAndExit(code, isPrinted))\n    }\n  }\n}\n\n/**\n * Evaluate a script.\n */\nfunction evalAndExit (code: string, isPrinted: boolean) {\n  const filename = getEvalFileName(evalId)\n\n  const module = new Module(filename)\n  module.filename = filename\n  module.paths = Module._nodeModulePaths(cwd)\n\n  ;(global as any).__filename = filename\n  ;(global as any).__dirname = cwd\n  ;(global as any).exports = module.exports\n  ;(global as any).module = module\n  ;(global as any).require = module.require.bind(module)\n\n  let result: any\n\n  try {\n    result = _eval(code, global)\n  } catch (error) {\n    if (error instanceof TSError) {\n      console.error(print(error))\n      process.exit(1)\n    }\n\n    throw error\n  }\n\n  if (isPrinted) {\n    console.log(typeof result === 'string' ? result : inspect(result))\n  }\n\n  process.exit(0)\n}\n\n/**\n * Stringify the `TSError` instance.\n */\nfunction print (error: TSError) {\n  const title = `${chalk.red('⨯')} Unable to compile TypeScript`\n\n  return `${chalk.bold(title)}\\n${error.diagnostics.map(x => x.message).join('\\n')}`\n}\n\n/**\n * Evaluate the code snippet.\n */\nfunction _eval (input: string, context: any) {\n  const isCompletion = !/\\n$/.test(input)\n  const path = join(cwd, getEvalFileName(evalId++))\n  const { code, lineOffset } = getEvalContent(input)\n  const filename = basename(path)\n\n  const output = service().compile(code, path, lineOffset)\n\n  const script = createScript(output, supportsScriptOptions ? { filename, lineOffset } : filename)\n  const result = script.runInNewContext(context)\n\n  if (!isCompletion) {\n    EVAL_PATHS[path] = code\n  }\n\n  return result\n}\n\n/**\n * Start a CLI REPL.\n */\nfunction startRepl () {\n  const repl = start({\n    prompt: '> ',\n    input: process.stdin,\n    output: process.stdout,\n    eval: replEval,\n    useGlobal: false\n  })\n\n  repl.defineCommand('type', {\n    help: 'Check the type of a TypeScript identifier',\n    action: function (identifier: string) {\n      if (!identifier) {\n        repl.displayPrompt()\n        return\n      }\n\n      const path = join(cwd, getEvalFileName(evalId++))\n      const { code, lineOffset } = getEvalContent(identifier)\n\n      // Cache the file for language services lookup.\n      EVAL_PATHS[path] = code\n\n      const { name, comment } = service().getTypeInfo(path, code.length)\n\n      // Delete the file from the cache after used for lookup.\n      delete EVAL_PATHS[path]\n\n      repl.outputStream.write(`${chalk.bold(name)}\\n${comment ? `${comment}\\n` : ''}`)\n      repl.displayPrompt()\n    }\n  })\n}\n\n/**\n * Eval code from the REPL.\n */\nfunction replEval (code: string, context: any, filename: string, callback: (err?: Error, result?: any) => any) {\n  let err: any\n  let result: any\n\n  // TODO: Figure out how to handle completion here.\n  if (code === '.scope') {\n    callback()\n    return\n  }\n\n  try {\n    result = _eval(code, context)\n  } catch (error) {\n    if (error instanceof TSError) {\n      // Support recoverable compilations using >= node 6.\n      if (typeof Recoverable === 'function' && isRecoverable(error)) {\n        err = new Recoverable(error)\n      } else {\n        err = print(error)\n      }\n    } else {\n      err = error\n    }\n  }\n\n  callback(err, result)\n}\n\n/**\n * Get the file text, checking for eval first.\n */\nfunction getFileEval (path: string) {\n  return EVAL_PATHS.hasOwnProperty(path) ? EVAL_PATHS[path] : getFile(path)\n}\n\n/**\n * Get whether the file exists.\n */\nfunction fileExistsEval (path: string) {\n  return EVAL_PATHS.hasOwnProperty(path) || fileExists(path)\n}\n\n/**\n * Create an file for evaluation.\n */\nfunction getEvalContent (input: string) {\n  const refs = Object.keys(EVAL_PATHS).map(x => `/// <reference path=\"${x}\" />\\n`)\n\n  return {\n    lineOffset: -refs.length,\n    code: refs.join('') + input\n  }\n}\n\n/**\n * Retrieve the eval filename.\n */\nfunction getEvalFileName (index: number) {\n  return `[eval ${index}].ts`\n}\n\nconst RECOVERY_CODES: number[] = [\n  1003, // \"Identifier expected.\"\n  1005, // \"')' expected.\"\n  1109, // \"Expression expected.\"\n  1126, // \"Unexpected end of text.\"\n  1160, // \"Unterminated template literal.\"\n  1161 // \"Unterminated regular expression literal.\"\n]\n\n/**\n * Check if a function can recover gracefully.\n */\nfunction isRecoverable (error: TSError) {\n  return error.diagnostics.every(x => RECOVERY_CODES.indexOf(x.code) > -1)\n}\n"]}